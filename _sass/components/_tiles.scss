///
/// Phantom by HTML5 UP
/// html5up.net | @ajlkn
/// Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
///

/* Tiles */

	.tiles {
		$gutter: _size(gutter);
		$duration: 0.5s;
		$ease: 'ease';
        $overlay: 0.25;

		@include vendor('display', 'flex');
		@include vendor('flex-wrap', 'wrap');
		position: relative;
        padding: ($gutter * -0.5);

        > .year {
            width: 100%;
            margin: 2em 0 0 0;
            header h3 {
                display: inline-block;
                border-bottom: dotted _size(accent-width) _palette(accent1);
            }
        }

		article {
			@include vendor('transition', (
				'transform #{$duration} #{$ease}',
				'opacity #{$duration} #{$ease}'
			));
			position: relative;
            width: calc(#{(100% / 3)});
            padding: ($gutter * 0.5);

			> .image {
				@include vendor('transition', 'transform #{$duration} #{$ease}');
				position: relative;
				display: block;
				width: 100%;
				border-radius: _size(border-radius);
				overflow: hidden;

				img {
                    display: block;
					width: 100%;
				}

				&:before {
					@include vendor('pointer-events', 'none');
					@include vendor('transition', (
						'background-color #{$duration} #{$ease}',
						'opacity #{$duration} #{$ease}'
					));
					content: '';
					display: block;
					position: absolute;
					top: 0;
					left: 0;
					width: 100%;
					height: 100%;
					opacity: 0.45;
					z-index: 1;
					opacity: 0.8;
				}

				// &:after {
				// 	@include vendor('pointer-events', 'none');
				// 	@include vendor('transition', 'opacity #{$duration} #{$ease}');
				// 	content: '';
				// 	display: block;
				// 	position: absolute;
				// 	top: 0;
				// 	left: 0;
				// 	width: 100%;
				// 	height: 100%;
				// 	background-image: svg-url('<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100" preserveAspectRatio="none"><style>line { stroke-width: 0.25px; stroke: #ffffff; }</style><line x1="0" y1="0" x2="100" y2="100" /><line x1="100" y1="0" x2="0" y2="100" /></svg>');
				// 	background-position: center;
				// 	background-repeat: no-repeat;
				// 	background-size: 100% 100%;
				// 	opacity: 0.25;
				// 	z-index: 2;
				// }
			}

			> a {
				@include vendor('display', 'flex');
				@include vendor('flex-direction', 'column');
				@include vendor('align-items', 'center');
				@include vendor('justify-content', 'center');
				@include vendor('transition', (
					'background-color #{$duration} #{$ease}',
					'transform #{$duration} #{$ease}'
				));
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				padding: 1em;
				border-radius: _size(border-radius);
				border-bottom: 0;
				color: _palette(fg-accent);
				text-align: center;
				text-decoration: none;
				z-index: 3;

				> :last-child {
					margin: 0;
				}

				&:hover {
					color: _palette(fg-accent) !important;
				}

				h2, h4, p {
					margin: 0.5em;
				}

				.content {
					@include vendor('transition', (
						'max-height #{$duration} #{$ease}',
						'opacity #{$duration} #{$ease}'
					));
					width: 100%;
					max-height: 0;
					line-height: 1.5;
					margin-top: 0.35em;
					opacity: 0;

					> :last-child {
						margin-bottom: 0;
					}
				}
			}

            &.archive-odd{
                width: calc(#{(100% / 2)});
                @include vendor('display', 'flex');
        		@include vendor('flex-wrap', 'wrap');
                display: inline-block;

    			&:after {
    				background: _palette(border);
    				content: '';
    				display: block;
    				height: 1px;
    				position: absolute;
    				right: ($gutter * 0.5);
                    top: 0;
    				width: calc(100% - #{$gutter});
    			}

                &.first {
                    &:after {
                        display: none;
                    }
                }

                >a {
                    position: relative;
                    width: 100%;
                    height: 100%;
                    padding: 1em;
                    border-bottom: 0;
                    color: _palette(fg);
                    text-decoration: none;

    				&:hover {
    					color: _palette(fg) !important;
    				}
                }
            }

            &.archive-even{
                width: calc(#{(100% / 2)});
                @include vendor('display', 'flex');
        		@include vendor('flex-wrap', 'wrap');
                display: inline-block;

                &:before {
    				background: _palette(border);
    				content: '';
    				display: block;
    				height: calc(100% - #{$gutter});
    				position: absolute;
    				top: ($gutter * 0.5);
                    left: 0;
    				width: 1px;
    			}

    			&:after {
    				background: _palette(border);
    				content: '';
    				display: block;
    				height: 1px;
    				position: absolute;
    				right: ($gutter * 0.5);
                    top: 0;
    				width: calc(100% - #{$gutter});
    			}

                &.first {
                    &:after {
                        display: none;
                    }
                }

                >a {
                    position: relative;
                    width: 100%;
                    height: 100%;
                    padding: 1em;
                    border-bottom: 0;
                    color: _palette(fg);
                    text-decoration: none;

    				&:hover {
    					color: _palette(fg) !important;
    				}
                }
            }

            &.related-post{
                width: calc(#{(100% / 2)});
                @include vendor('display', 'flex');
        		@include vendor('flex-wrap', 'wrap');
                display: inline-block;

                &:before {
    				background: _palette(border);
    				content: '';
    				display: block;
    				height: calc(100% - #{$gutter});
    				position: absolute;
    				top: ($gutter * 0.5);
                    left: 0;
    				width: 1px;
    			}

    			&:after {
    				background: _palette(border);
    				content: '';
    				display: block;
    				height: 1px;
    				position: absolute;
    				right: ($gutter * 0.5);
                    bottom: 0;
    				width: calc(100% - #{$gutter});
    			}

                >a {
                    position: relative;
                    width: 100%;
                    height: 100%;
                    padding: 1em;
                    border-bottom: 0;
                    color: _palette(fg);
                    text-decoration: none;

    				&:hover {
    					color: _palette(fg) !important;
    				}
                }

                &:nth-child(2n+1) {
                    &:before {
                        display: none;
                    }
                }

                &:nth-last-child(1),
				&:nth-last-child(2) {

					&:before {
						height: 100%;
					}

					&:after {
						display: none;
					}
				}
            }

            &.related-post-mini{
                width: 100%;
                @include vendor('display', 'flex');
                @include vendor('flex-wrap', 'wrap');
                display: inline-block;

                &:after {
				    				background: _palette(border);
				    				content: '';
				    				display: block;
				    				height: 1px;
				    				position: absolute;
				    				right: ($gutter * 0.5);
				                    bottom: 0;
				    				width: calc(100% - #{$gutter});
    						}

                >a {
                    position: relative;
                    width: 100%;
                    height: 100%;
                    padding: 1em;
                    border-bottom: 0;
                    color: _palette(fg);
                    text-decoration: none;

    				&:hover {
    					color: _palette(fg) !important;
    				}

                    h6, p {
                        margin: 0;
                    }
                }



                &:last-child {
                    margin-bottom: 0;

                    &:after {
                        display: none;
                    }
                }
            }

            &.style-grey {
				> .image:before {
					background-color: _palette(fg-accent);
                    opacity: $overlay;
				}
			}

            &.style0 {
				> .image:before {
					background-color: _palette(accent1);
                    opacity: $overlay;
				}
			}

			&.style1 {
				> .image:before {
					background-color: _palette(accent2);
                    opacity: $overlay;
				}
			}

			&.style2 {
				> .image:before {
					background-color: _palette(accent3);
                    opacity: $overlay;
				}
			}

			&.style3 {
				> .image:before {
					background-color: _palette(accent4);
                    opacity: $overlay;
				}
			}

			&.style4 {
				> .image:before {
					background-color: _palette(accent5);
                    opacity: $overlay;
				}
			}

			&.style5 {
				> .image:before {
					background-color: _palette(accent6);
                    opacity: $overlay;
				}
			}

			body:not(.is-touch) & {
				&:hover {
					> .image {
						@include vendor('transform', 'scale(1.1)');

						&:before {
							background-color: _palette(bg-accent);
							opacity: 0.35;
						}

						&:after {
							opacity: 0;
						}
					}

					.content {
						max-height: 15em;
						opacity: 1;
					}
				}
			}
		}

		* + & {
			margin-top: _size(element-margin);
		}

		body.is-loading & {
			article {
				@include vendor('transform', 'scale(0.9)');
				opacity: 0;
			}
		}

		body.is-touch & {
			article {
				.content {
					max-height: 15em;
					opacity: 1;
				}
			}
		}

		@include breakpoint(large) {
			$gutter: _size(gutter) * 0.5;

            padding: ($gutter * -0.5);

			article {
                width: calc(#{(100% / 3)});
                padding: ($gutter * 0.5);
			}
		}

		@include breakpoint(medium) {
			$gutter: _size(gutter);

            padding: ($gutter * -0.5);

			article {
                width: calc(#{(100% / 2)});
                padding: ($gutter * 0.5);
			}
		}

		@include breakpoint(small) {
			$gutter: _size(gutter) * 0.5;

            padding: ($gutter * -0.5);

			article {
                width: calc(#{(100% / 2)});
                padding: ($gutter * 0.5);

				&:hover {
					> .image {
						@include vendor('transform', 'scale(1.0)');
					}
				}
			}
		}

		@include breakpoint(xsmall) {
			$gutter: _size(gutter) * 0.5;

            padding: 0;

			article {
				width: 100%;
                padding: $gutter 0 0 0;

                &.related-post {

                    width: 100%;

                    &:before {
    					display: none;
    				}

    				&:after {
    					width: 100%;
                        right: 0;
    				}

                    &:nth-last-child(2){
                        &:after {
    						display: block;
    					}
                    }

    				&:last-child {
    					margin-bottom: 0;

    					&:after {
    						display: none;
    					}
    				}
                }

                &.archive-even,
                &.archive-odd {

                    width: 100%;

                    &:before {
    					display: none;
    				}

    				&:after {
    					width: 100%;
                        right: 0;
    				}

    				&:last-child {
    					margin-bottom: 0;
    				}
                }

                &.archive-even {
                    &.first {
                        &:after {
                            display: block;
                        }
                    }
                }
			}
		}
	}
